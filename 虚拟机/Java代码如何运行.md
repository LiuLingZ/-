JRE，运行Java程序必备环境，其实仅包含运行Java的核心类库。包括JVM 和 核心Java类库。



Java 虚拟机可以由硬件实现，但更多的是由各个系统提供软件实现。如此，当Java文件只需被编译一次生成字节码，就可以在各种不同环境通过虚拟机运行。“一次编译，到处运行”。



Java虚拟机作用：

​	托管环境，管理加载的字节码文件，处理错误和垃圾回收

​	加载字节码文件到方法区中，运行时会执行方法区中的代码

JVM分

​	面向Java方法的Java虚拟机栈

​	面向native方法（C++）的本地方法栈

​	堆

​	程序技术器

​	方法区

硬件角度

​	机器无法直接运行字节码，需要将之转换为字节码

​	字节码 → 机器码：	

​	编译执行(传统)

​	解释执行

​	

C1、C2

​	HotSpot虚拟机提供了C1、C2、Graal即时编译器，C1用于客户端Java的GUI程序，又叫Client编译器；C2主要用于服务端对峰值有要求的场景，又叫Server即时编译器。 即时编译是编译执行的一种手段，是为了提升代码运行效率。以方法为单位即时编译。

​	Java7开始，HotSpot采用分层编译模式，热点先被C1编译，热点中的热点再被C2编译。

​	多个即时编译器：编译时间和执行效率做平衡。

​	为了不干扰正常运行，即时编译是额外开辟线程，且C1：C2的线程比例设为1：2