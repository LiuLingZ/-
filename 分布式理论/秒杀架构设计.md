秒杀，最主要的问题就是 ，如何让接口抗住流量 ，以及如何限制访问DB的流量，已经DB并发存在的业务逻辑。针对这些问题来进行初步的设计。



首先 ，秒杀业务是额外扩充的，流量又大，所以应该分离与原来的业务，放到别的服务器上，免得秒杀奔溃还导致原来的业务阻塞崩溃。



页面静态化

为了充分利用网络用来秒杀，原本的页面改为静态页面，只留下秒杀接口，其他静态资源放CDN，减少额外的带宽消耗。

什么是CDN：https://blog.csdn.net/shenmofeng15/article/details/84034804 。 内容分发网络，根据物理距离返回最近的服务器。



逻辑优化

为了防止有人重复秒杀，在第一次点击秒杀键之后，不可再点击（后续秒杀无效，减少无效请求）



服务器的集群

那么首先，流量来了，直接访问接口可能让接口服务器顶不住，所以最先的，可以进行服务器的集群，即多台服务器放秒杀服务接口，再通过负载均衡，对外提供一致的服务。



缓存请求、缓存结果、异步

根据流量，判断是否真的需要限制一定的访问数访问接口，就可以通过 请求队列，**一次只放进一定数量的请求**，当被秒杀完了，剩余的请求直接就返回秒杀失败。**涉及一定的限流算法。**

对于读请求，就是重复刷自己有没有秒到，就可以用缓存如redis来缓存结果，直接返回。

秒杀成功，直接返回结果，再异步去填写订单什么的业务，脱离秒杀业务，减低压力。（滞后反馈，秒杀后不知道结果，需要刷新。）







数据库

将秒杀的业务的表单独分出到另外的库中，读表、写表再考虑是否分库。数据库同步又是一个问题，大部分读多写少，读可能是瓶颈。



还要考虑可用性，是否需要进行冗余，也是个问题。